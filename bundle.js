!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,a=function(t,i){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===e(a)?a:String(a)),r)}var a}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var n=i((function e(t,i,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=i,this.alive=n,t<0||i<0)throw new Error("Coordinates must be non-negative");this.x=t,this.y=i,this.alive=n}));function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function o(e,t,i){return(t=s(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===r(t)?t:String(t)}var l=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"isGameRunning",!1),o(this,"gameIntervalId",null),o(this,"hasChanges",!0),this.renderer=null,this.gameBoard=t,this.interval=i,this.height=this.gameBoard.getHeight(),this.width=this.gameBoard.getWidth(),this.grid=this.gameBoard.getGrid()}var t,i;return t=e,(i=[{key:"getSpeed",value:function(){return this.interval}},{key:"setRenderer",value:function(e){this.renderer=e}},{key:"isCellAlive",value:function(e,t){return this.grid=this.gameBoard.getGrid(),this.grid[e][t].alive}},{key:"setCell",value:function(e,t,i){this.grid[e][t].alive=i}},{key:"toggleCell",value:function(e,t){var i=this.isCellAlive(e,t);this.setCell(e,t,!i),this.gameBoard.updateGrid(this.grid)}},{key:"getNextGeneration",value:function(){var e=this;this.grid=this.gameBoard.getGrid(),this.height=this.gameBoard.getHeight(),this.width=this.gameBoard.getWidth();var t=Array.from({length:this.height},(function(){return Array.from({length:e.width},(function(){return new n(0,0,!1)}))}));this.hasChanges=!1;for(var i=0;i<this.height;i++)for(var r=0;r<this.width;r++){var a=this.grid[i][r],o=this.countAliveNeighbors(i,r);a.alive?o<2||o>3?(t[i][r].alive=!1,this.hasChanges=!0):t[i][r].alive=!0:3===o?(t[i][r].alive=!0,this.hasChanges=!0):t[i][r].alive=!1}this.gameBoard.updateGrid(t)}},{key:"countAliveNeighbors",value:function(e,t){var i=this,n=0,r=function(e){return 0===e?i.height-1:e-1},a=function(e){return e===i.height-1?0:e+1},o=function(e){return 0===e?i.width-1:e-1},s=function(e){return e===i.width-1?0:e+1};return this.grid[r(e)][t].alive&&n++,this.grid[a(e)][t].alive&&n++,this.grid[e][o(t)].alive&&n++,this.grid[e][s(t)].alive&&n++,this.grid[r(e)][o(t)].alive&&n++,this.grid[r(e)][s(t)].alive&&n++,this.grid[a(e)][o(t)].alive&&n++,this.grid[a(e)][s(t)].alive&&n++,n}},{key:"startGame",value:function(){var e=this;if(this.isGameRunning)console.log("Игра уже запущена.");else if(this.isGameRunning=!0,this.renderer){var t=this.renderer.getSpeed();t&&(this.gameIntervalId=setInterval((function(){return e.areAnyCellAlive(e.grid)?(e.getNextGeneration(),e.hasChanges?void(e.renderer&&e.renderer.draw()):(e.stopGame(),void console.log("Игра остановлена: состояние не изменилось."))):(e.stopGame(),void console.log("Игра остановлена: все клетки мертвы."))}),t))}}},{key:"stopGame",value:function(){this.isGameRunning?(null!==this.gameIntervalId&&clearInterval(this.gameIntervalId),this.isGameRunning=!1):console.log("Игра не была запущена.")}},{key:"clearGameField",value:function(){this.isGameRunning&&this.stopGame(),this.gameBoard.setGameBoard(this.gameBoard.getHeight(),this.gameBoard.getWidth()),this.renderer?this.renderer.draw():console.log("No renderer")}},{key:"areAnyCellAlive",value:function(e){for(var t=0;t<e.length;t++)for(var i=0;i<e[t].length;i++)if(e[t][i].alive)return!0;return!1}}])&&a(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function d(e,t,i){return(t=c(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===h(t)?t:String(t)}var f=function(){function e(t,i,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"cellSize",10),d(this,"onClick",(function(e){var t=Math.floor(e.offsetX/r.cellSize),i=Math.floor(e.offsetY/r.cellSize);i>=0&&i<r.height&&t>=0&&t<r.width?(r.gameOfLife.toggleCell(i,t),r.draw()):console.error("Coordinates (".concat(i,", ").concat(t,") are outside the grid."))})),this.container=t,this.canvasContainer=document.createElement("div"),this.canvasContainer.classList.add("div-field"),this.container.appendChild(this.canvasContainer),this.canvas=document.createElement("canvas"),this.canvas.id="game-canvas",this.canvas.width=0,this.canvas.height=0,this.canvasContainer.appendChild(this.canvas),this.context=this.canvas.getContext("2d"),this.gameBoard=i,this.gameOfLife=n,this.width=this.gameBoard.getWidth(),this.height=this.gameBoard.getHeight(),this.speed=this.gameOfLife.getSpeed();var a=document.createElement("div"),o=document.createElement("input"),s=document.createElement("input"),l=document.createElement("input"),h=document.createElement("span"),u=document.createElement("span"),c=document.createElement("span"),f=document.createElement("lable"),v=document.createElement("lable"),g=document.createElement("lable"),m=document.createElement("button"),p=document.createElement("button"),y=document.createElement("button");t.prepend(a),a.appendChild(v),a.appendChild(h),a.appendChild(o),a.appendChild(f),a.appendChild(u),a.appendChild(s),a.appendChild(g),a.appendChild(c),a.appendChild(l),a.appendChild(m),a.appendChild(p),a.appendChild(y),a.classList.add("div-menu"),m.classList.add("button-stop"),p.classList.add("button-start"),y.classList.add("button-clear"),h.classList.add("span-value-height"),u.classList.add("span-value-width"),u.classList.add("span-value-speed"),m.textContent="Stop",p.textContent="Start",y.textContent="Clear",s.type="range",s.min="10",s.max="100",s.step="1",s.value="50",s.id="width-input",u.textContent=s.value,f.setAttribute("for","width-input"),f.textContent="Width: ",o.type="range",o.min="10",o.max="100",o.step="1",o.value="50",o.id="height-input",h.textContent=o.value,v.setAttribute("for","height-input"),v.textContent="Height: ",l.type="range",l.min="0.01",l.max="2",l.step="0.01",l.value="1",l.id="speed-input",c.textContent=l.value,g.setAttribute("for","speed-input"),g.textContent="Game speed : ",o.addEventListener("input",(function(){h.textContent=o.value,r.height=+o.value,r.gameBoard.setGameBoard(r.height,r.width),r.draw()})),s.addEventListener("input",(function(){u.textContent=s.value,r.width=+s.value,r.gameBoard.setGameBoard(r.height,r.width),r.draw()})),l.addEventListener("input",(function(){c.textContent=l.value,r.speed=1e3*+l.value})),p.addEventListener("click",(function(){r.gameOfLife.startGame()})),m.addEventListener("click",(function(){r.gameOfLife.stopGame()})),y.addEventListener("click",(function(){r.gameOfLife.clearGameField()})),this.canvas.addEventListener("click",this.onClick.bind(this))}var t,i;return t=e,(i=[{key:"draw",value:function(){if(this.gameBoard){this.canvas.height=this.height*this.cellSize,this.canvas.width=this.width*this.cellSize,this.context.clearRect(0,0,this.canvas.height,this.canvas.width);for(var e=this.gameBoard.getGrid(),t=0;t<this.height;t++)for(var i=0;i<this.width;i++)this.context.fillStyle=e[t][i].alive?"black":"white",this.context.fillRect(i*this.cellSize,t*this.cellSize,this.cellSize,this.cellSize)}else console.warn("GameBoard is not set.")}},{key:"setGameBoard",value:function(e){this.gameBoard=e,this.width=this.gameBoard.getWidth(),this.height=this.gameBoard.getHeight(),this.draw()}},{key:"getSpeed",value:function(){return this.speed}}])&&u(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==v(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===v(r)?r:String(r)),n)}var r}var m=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.height=t,this.width=i,this.grid=this.initializeGrid()}var t,i;return t=e,(i=[{key:"initializeGrid",value:function(){for(var e=[],t=0;t<this.height;t++){e[t]=[];for(var i=0;i<this.width;i++)e[t][i]=new n(t,i,!1)}return e}},{key:"getGrid",value:function(){return this.grid}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"setGameBoard",value:function(e,t){this.width=t,this.height=e,this.grid=this.initializeGrid()}},{key:"updateGrid",value:function(e){this.grid=e}}])&&g(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),p=document.getElementById("app");if(!p)throw new Error("Element with id 'app' was not found.");var y=new m(50,50),b=new l(y,1e3),w=new f(p,y,b);w.setGameBoard(y),b.setRenderer(w)}();
//# sourceMappingURL=bundle.js.map