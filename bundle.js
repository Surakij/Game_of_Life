!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,a=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===t(a)?a:String(a)),r)}var a}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var n=i((function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i,this.alive=n}));function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function o(t,e,i){return(e=l(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function l(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===r(e)?e:String(e)}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"isGameRunning",!1),o(this,"gameIntervalId",null),o(this,"hasChanges",!0),this.renderer=null,this.gameBoard=e,this.height=this.gameBoard.getHeight(),this.width=this.gameBoard.getWidth(),this.grid=this.gameBoard.getGrid()}var e,i;return e=t,i=[{key:"setRenderer",value:function(t){this.renderer=t}},{key:"isCellAlive",value:function(t,e){return this.grid=this.gameBoard.getGrid(),this.grid[t][e].alive}},{key:"setCell",value:function(t,e,i){this.grid[t][e].alive=i}},{key:"toggleCell",value:function(t,e){var i=this.isCellAlive(t,e);this.setCell(t,e,!i),this.gameBoard.updateGrid(this.grid)}},{key:"getNextGeneration",value:function(){var t=this;this.grid=this.gameBoard.getGrid(),this.height=this.gameBoard.getHeight(),this.width=this.gameBoard.getWidth();var e=Array.from({length:this.height},(function(){return Array.from({length:t.width},(function(){return new n(0,0,!1)}))}));this.hasChanges=!1;for(var i=0;i<this.height;i++)for(var r=0;r<this.width;r++){var a=this.grid[i][r],o=this.countAliveNeighbors(i,r);a.alive?o<2||o>3?(e[i][r].alive=!1,this.hasChanges=!0):e[i][r].alive=!0:3===o?(e[i][r].alive=!0,this.hasChanges=!0):e[i][r].alive=!1}this.grid=e,this.gameBoard.updateGrid(this.grid)}},{key:"countAliveNeighbors",value:function(t,e){var i=this,n=0,r=function(t){return 0===t?i.height-1:t-1},a=function(t){return t===i.height-1?0:t+1},o=function(t){return 0===t?i.width-1:t-1},l=function(t){return t===i.width-1?0:t+1};return this.grid[r(t)][e].alive&&n++,this.grid[a(t)][e].alive&&n++,this.grid[t][o(e)].alive&&n++,this.grid[t][l(e)].alive&&n++,this.grid[r(t)][o(e)].alive&&n++,this.grid[r(t)][l(e)].alive&&n++,this.grid[a(t)][o(e)].alive&&n++,this.grid[a(t)][l(e)].alive&&n++,n}},{key:"startGame",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.isGameRunning?console.log("Игра уже запущена."):(this.isGameRunning=!0,this.gameIntervalId=setInterval((function(){return t.areAnyCellAlive(t.grid)?(t.getNextGeneration(),t.hasChanges?void(t.renderer&&t.renderer.draw()):(t.stopGame(),void console.log("Игра остановлена: состояние не изменилось."))):(t.stopGame(),void console.log("Игра остановлена: все клетки мертвы."))}),e))}},{key:"stopGame",value:function(){this.isGameRunning?(null!==this.gameIntervalId&&clearInterval(this.gameIntervalId),this.isGameRunning=!1):console.log("Игра не была запущена.")}},{key:"clearGameField",value:function(){this.isGameRunning&&this.stopGame(),this.gameBoard.setGameBoard(this.gameBoard.getHeight(),this.gameBoard.getWidth()),this.renderer?this.renderer.draw():console.log("No renderer")}},{key:"areAnyCellAlive",value:function(t){for(var e=0;e<t.length;e++)for(var i=0;i<t[e].length;i++)if(t[e][i].alive)return!0;return!1}}],i&&a(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function c(t,e,i){return(e=d(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function d(t){var e=function(t,e){if("object"!==h(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===h(e)?e:String(e)}var f=function(){function t(e,i,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"cellSize",10),c(this,"onClick",(function(t){var e=Math.floor(t.offsetX/r.cellSize),i=Math.floor(t.offsetY/r.cellSize);r.gameOfLife.toggleCell(i,e),r.draw()})),this.container=e,this.canvasContainer=document.createElement("div"),this.canvasContainer.classList.add("div-field"),this.container.appendChild(this.canvasContainer),this.canvas=document.createElement("canvas"),this.canvas.id="game-canvas",this.canvas.width=0,this.canvas.height=0,this.canvasContainer.appendChild(this.canvas),this.context=this.canvas.getContext("2d"),this.gameBoard=i,this.gameOfLife=n,this.width=this.gameBoard.getWidth(),this.height=this.gameBoard.getHeight();var a=document.createElement("div"),o=document.createElement("input"),l=document.createElement("input"),s=document.createElement("span"),h=document.createElement("span"),u=document.createElement("lable"),d=document.createElement("lable"),f=document.createElement("button"),v=document.createElement("button"),g=document.createElement("button");e.appendChild(a),a.appendChild(d),a.appendChild(o),a.appendChild(s),a.appendChild(u),a.appendChild(l),a.appendChild(h),a.appendChild(f),a.appendChild(v),a.appendChild(g),a.classList.add("div-menu"),f.classList.add("button-stop"),v.classList.add("button-start"),g.classList.add("button-clear"),s.classList.add("span-value-height"),h.classList.add("span-value-width"),f.textContent="Stop",v.textContent="Start",g.textContent="Clear",l.classList.add("width-range"),l.type="range",l.min="10",l.max="100",l.step="1",l.value="50",l.id="width-input",h.textContent=l.value,u.setAttribute("for","width-input"),u.textContent="width: ",o.classList.add("height-range"),o.type="range",o.min="10",o.max="100",o.step="1",o.value="50",o.id="height-input",s.textContent=o.value,d.setAttribute("for","height-input"),d.textContent="height: ",o.addEventListener("input",(function(){s.textContent=o.value,r.height=+o.value,r.gameBoard.setGameBoard(r.height,r.width),r.draw()})),l.addEventListener("input",(function(){h.textContent=l.value,r.width=+l.value,r.gameBoard.setGameBoard(r.height,r.width),r.draw()})),v.addEventListener("click",(function(){r.gameOfLife.startGame()})),f.addEventListener("click",(function(){r.gameOfLife.stopGame()})),g.addEventListener("click",(function(){r.gameOfLife.clearGameField()})),this.canvas.addEventListener("click",this.onClick.bind(this))}var e,i;return e=t,(i=[{key:"draw",value:function(){if(this.gameBoard){this.canvas.height=this.height*this.cellSize,this.canvas.width=this.width*this.cellSize,this.context.clearRect(0,0,this.canvas.height,this.canvas.width);for(var t=this.gameBoard.getGrid(),e=0;e<this.height;e++)for(var i=0;i<this.width;i++)this.context.fillStyle=t[e][i].alive?"black":"white",this.context.fillRect(i*this.cellSize,e*this.cellSize,this.cellSize,this.cellSize)}else console.warn("GameBoard is not set.")}},{key:"setGameBoard",value:function(t){this.gameBoard=t,this.width=this.gameBoard.getWidth(),this.height=this.gameBoard.getHeight(),this.draw()}}])&&u(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==v(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===v(r)?r:String(r)),n)}var r}var m=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.height=e,this.width=i,this.grid=this.initializeGrid()}var e,i;return e=t,(i=[{key:"initializeGrid",value:function(){for(var t=[],e=0;e<this.height;e++){t[e]=[];for(var i=0;i<this.width;i++)t[e][i]=new n(e,i,!1)}return t}},{key:"getGrid",value:function(){return this.grid}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"setGameBoard",value:function(t,e){this.width=e,this.height=t,this.grid=this.initializeGrid()}},{key:"updateGrid",value:function(t){this.grid=t}}])&&g(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),p=document.getElementById("app"),y=new m(50,50),b=new s(y),w=new f(p,y,b);w.setGameBoard(y),b.setRenderer(w)}();
//# sourceMappingURL=bundle.js.map